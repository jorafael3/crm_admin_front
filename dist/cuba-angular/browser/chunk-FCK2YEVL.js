import{l as n}from"./chunk-EV33RPA3.js";import{a as _}from"./chunk-DG3KGGUG.js";import{d as b}from"./chunk-N2SYYEDE.js";import{g as C}from"./chunk-OWGIYU45.js";import{Ab as s,Ca as d,Hb as u,Wb as m,a as r,b as p,hc as g,ic as f,wc as h}from"./chunk-EOCIFGZ3.js";var v=class l{constructor(i,t){this.router=i;this.sanitizer=t}pageSize=14;hideColumns=[];products;tableConfig={columns:[{title:"Product Name",field_value:"product_name",sort:!0},{title:"SKU",field_value:"sku",sort:!0},{title:"Category",field_value:"category",sort:!0},{title:"Price",field_value:"price",sort:!0},{title:"Qty",field_value:"qty",sort:!0},{title:"Status",field_value:"stock",sort:!0},{title:"Rating",field_value:"rating",sort:!0}],row_action:[{label:"Edit",action_to_perform:"edit",icon:"edit-content",path:"/product/create"},{label:"Delete",action_to_perform:"delete",icon:"trash1",modal:!0}],data:[]};ngOnChanges(i){i.hideColumns&&this.tableConfig.columns.forEach(t=>{t.hide_column=this.hideColumns.includes(t.field_value)})}ngOnInit(){window.navigateToProduct=()=>{this.router.navigate(["/product/details"])},this.tableConfig.data=this.formatProductDetails(n),this.products=n}handleAction(i){i.action_to_perform==="delete"&&i.data&&(this.products=this.products.filter(t=>t.id!==i.data.id),this.tableConfig=p(r({},this.tableConfig),{data:this.formatProductDetails(this.products)}))}formatProductDetails(i){return i.map(t=>{let e=r({},t);e.product_name=this.sanitizer.bypassSecurityTrustHtml(`<div class="product-names">
                                        <div class="light-product-box">
                                          <img class="img-fluid" src="${t.image}" alt="${t.product_name}">
                                        </div>
                                        <a href="javascript:void(0)"  onclick="navigateToProduct()">${t.product_name}</a>
                                      </div>`),e.sku=`<p class="c-o-light">${t.sku}</p>`,e.category=`<p class="c-o-light">${t.category}</p>`,e.price=`<p class="c-o-light">${Number(t.price).toFixed(2)}</p>`,e.qty=`<p class="c-o-light">${t.qty}</p>`,e.stock=t.stock==="in_stock"?`<span class="badge badge-light-primary">${t.stock.replace(/_/g," ").toLowerCase().replace(/\b\w/g,a=>a.toUpperCase())}</span>`:t.stock==="out_of_stock"?`<span class="badge badge-light-secondary">${t.stock.replace(/_/g," ").toLowerCase().replace(/\b\w/g,a=>a.toUpperCase())}</span>`:"-";let c=4,o="";for(let a=0;a<t.rating;a++)o+='<i class="fa-solid fa-star txt-warning"></i>';for(let a=t.rating;a<c;a++)o+='<i class="fa-regular fa-star txt-warning"></i>';return e.rating=`<div class="rating">${o}</div>`,e})}static \u0275fac=function(t){return new(t||l)(s(b),s(C))};static \u0275cmp=u({type:l,selectors:[["app-products"]],inputs:{pageSize:"pageSize",hideColumns:"hideColumns"},features:[d],decls:1,vars:6,consts:[[3,"action","hasCheckbox","tableConfig","pageSize","paginateDetails","showPaginate","selectedRows"]],template:function(t,e){t&1&&(g(0,"app-table",0),h("action",function(o){return e.handleAction(o)}),f()),t&2&&m("hasCheckbox",!0)("tableConfig",e.tableConfig)("pageSize",e.pageSize)("paginateDetails",!0)("showPaginate",!0)("selectedRows",!0)},dependencies:[_],encapsulation:2})};export{v as a};
