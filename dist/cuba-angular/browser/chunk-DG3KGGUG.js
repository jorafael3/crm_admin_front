import{a as wt}from"./chunk-DGA7BJ5E.js";import{b as pt}from"./chunk-B2JISH5B.js";import{e as at,i as ot}from"./chunk-N2SYYEDE.js";import{A as ft,K as bt,Y as ht,Z as xt,m as j,n as mt,o as ut,p as Ct,r as gt}from"./chunk-AHKOR54J.js";import{d as lt,h as rt,m as st,t as ct,u as _t,z as dt}from"./chunk-5WZK6UI3.js";import{A as O,D as R,l as $,r as nt}from"./chunk-WPZ2662Z.js";import{$b as U,Ab as E,Ca as H,Da as u,Ea as C,Hb as M,Jc as W,Kc as _,Lc as v,Ma as P,Mc as w,Nb as g,Nc as Q,Oc as G,Pc as J,Qc as K,Rc as X,Sc as Z,Ub as I,Uc as k,Wb as p,Yb as h,_b as q,ad as tt,cc as d,cd as et,e as vt,ec as y,ed as it,fc as S,gc as D,hc as c,ic as r,jc as T,nb as L,nc as b,pa as Y,ub as l,wc as m,yc as o}from"./chunk-EOCIFGZ3.js";var St=vt(wt());var B=e=>({disabled:e}),Nt=e=>({active:e});function Vt(e,i){if(e&1&&(c(0,"p"),_(1),r()),e&2){let t=o();l(),G("Showing ",t.paginate.total_items>0?t.paginate.start_index+1:0,"- ",t.paginate.total_items>0?t.paginate.end_index+1:0," of ",t.paginate.total_items>0?t.paginate.total_items:0," entries ")}}function Et(e,i){if(e&1&&(c(0,"span",2)(1,"span",6),_(2),r()()),e&2){let t=o();l(2),w(" ",t.selectedItems," rows selected ")}}function Pt(e,i){if(e&1){let t=b();c(0,"li",4)(1,"a",5),m("click",function(){let a=u(t).$implicit,s=o();return C(s.pageSet(a))}),_(2),r()()}if(e&2){let t=i.$implicit,n=o();p("ngClass",k(2,Nt,n.paginate.current_page==t)),l(2),v(t)}}var z=class e{total;currentPage;pageSize;paginate={};paginateDetails;selectedItems;selectedRows;setPage=new P;pageSet(i){this.setPage.emit(i)}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=M({type:e,selectors:[["app-pagination"]],inputs:{total:"total",currentPage:"currentPage",pageSize:"pageSize",paginate:"paginate",paginateDetails:"paginateDetails",selectedItems:"selectedItems",selectedRows:"selectedRows"},outputs:{setPage:"setPage"},decls:19,vars:14,consts:[[1,"bottom-info"],[1,"d-flex","cb-info"],[1,"select-info"],[1,"pagination","justify-content-center"],[1,"page-item",3,"ngClass"],["href","javascript:void(0)",1,"page-link",3,"click"],[1,"select-item"]],template:function(t,n){t&1&&(c(0,"div",0)(1,"div",1),g(2,Vt,2,3,"p")(3,Et,3,1,"span",2),r(),c(4,"ul",3)(5,"li",4)(6,"a",5),m("click",function(){return n.pageSet(1)}),_(7," \xAB "),r()(),c(8,"li",4)(9,"a",5),m("click",function(){return n.pageSet(n.paginate.current_page-1)}),_(10," \u2039 "),r()(),S(11,Pt,3,4,"li",4,y),c(13,"li",4)(14,"a",5),m("click",function(){return n.pageSet(n.paginate.current_page+1)}),_(15," \u203A "),r()(),c(16,"li",4)(17,"a",5),m("click",function(){return n.pageSet(n.paginate.end_page)}),_(18," \xBB "),r()()()()),t&2&&(l(2),d(n.paginateDetails?2:-1),l(),d(n.selectedItems&&n.selectedRows?3:-1),l(2),p("ngClass",k(6,B,n.paginate.current_page===1)),l(3),p("ngClass",k(8,B,n.paginate.current_page===1)),l(3),D(n.paginate.pages),l(2),p("ngClass",k(10,B,n.paginate.current_page==n.paginate.total_pages)),l(3),p("ngClass",k(12,B,n.paginate.current_page==n.paginate.total_pages)))},dependencies:[R,$],encapsulation:2})};var A=class e{searchText="";getPager(i,t,n){let a=Number(Math.ceil(Number(i)/Number(n))),s=3;Number(t)<1?t=1:Number(t)>Number(a)&&(t=Number(a));let f,x;Number(a)<=Number(s)?(f=1,x=Number(a)):Number(t)<=Number(Math.floor(Number(s)/2))?(f=1,x=Number(s)):Number(t)>=Number(a)-Number(Math.floor(Number(s)/2))?(f=Number(a)-Number(s)+1,x=Number(a)):(f=Number(t)-Number(Math.floor(Number(s)/2)),x=Number(t)+Number(Math.floor(Number(s)/2)));let N=(Number(t)-1)*Number(n),F=Math.min(Number(N)+Number(n)-1,Number(i)-1),V=Array.from(Array(Number(x)+1-Number(f)).keys()).map(Dt=>Number(f)+Number(Dt));return{total_items:i,current_page:t,page_size:n,total_pages:a,start_page:f,end_page:x,start_index:N,end_index:F,pages:V}}static \u0275fac=function(t){return new(t||e)};static \u0275prov=Y({token:e,factory:e.\u0275fac,providedIn:"root"})};var It=e=>({background:e,cursor:"pointer"});function $t(e,i){if(e&1&&(c(0,"option",8),_(1),r()),e&2){let t=i.$implicit;p("value",t.value)("selected",t.selected),l(),v(t.title)}}function Ot(e,i){if(e&1){let t=b();c(0,"select",7),m("change",function(a){u(t);let s=o(3);return C(s.handleSelect(a))}),S(1,$t,2,3,"option",8,y),r()}if(e&2){let t=o(3);l(),D(t.pageSizeOptions)}}function Rt(e,i){if(e&1){let t=b();c(0,"span",16),m("mouseenter",function(){let a=u(t).$implicit,s=o(5);return C(s.hoveredDate=a)})("mouseleave",function(){u(t);let a=o(5);return C(a.hoveredDate=null)}),_(1),r()}if(e&2){let t=i.$implicit,n=i.focused,a=o(5);h("focused",n)("range",a.isRange(t))("faded",a.isHovered(t)||a.isInside(t)),l(),w(" ",t.day," ")}}function Bt(e,i){if(e&1){let t=b();c(0,"ngb-datepicker",15,0),m("dateSelect",function(a){u(t);let s=o(4);return C(s.onDateSelection(a))}),r(),g(2,Rt,2,7,"ng-template",null,1,it)}if(e&2){let t=W(3);p("displayMonths",2)("dayTemplate",t)}}function zt(e,i){if(e&1){let t=b();c(0,"div")(1,"div",9)(2,"div",10)(3,"label",11),_(4,"Select Dates"),r()(),c(5,"div",10)(6,"div",12)(7,"span",13),m("click",function(){u(t);let a=o(3);return C(a.handleDropdown())}),_(8),r(),c(9,"div",14)(10,"button",13),m("click",function(){u(t);let a=o(3);return C(a.handleDateFilter("today"))}),_(11,"Today"),r(),c(12,"button",13),m("click",function(){u(t);let a=o(3);return C(a.handleDateFilter("yesterday"))}),_(13,"Yesterday"),r(),c(14,"button",13),m("click",function(){u(t);let a=o(3);return C(a.handleDateFilter("7_days"))}),_(15,"Last 7 Days"),r(),c(16,"button",13),m("click",function(){u(t);let a=o(3);return C(a.handleDateFilter("30_days"))}),_(17,"Last 30 Days"),r(),c(18,"button",13),m("click",function(){u(t);let a=o(3);return C(a.handleDateFilter("this_month"))}),_(19,"This Month"),r(),c(20,"button",13),m("click",function(){u(t);let a=o(3);return C(a.handleDateFilter("last_month"))}),_(21,"Last Month"),r(),c(22,"button",13),m("click",function(){u(t);let a=o(3);return C(a.handleDateFilter("custom"))}),_(23,"Custom Date Range"),r()()(),g(24,Bt,4,2),r()()()}if(e&2){let t=o(3);l(8),v(t.selectedDate?t.selectedDate:"Select"),l(),h("range-option",t.dateDropdownOpen),l(),h("active",t.selectedValue=="today"),l(2),h("active",t.selectedValue=="yesterday"),l(2),h("active",t.selectedValue=="7_days"),l(2),h("active",t.selectedValue=="30_days"),l(2),h("active",t.selectedValue=="this_month"),l(2),h("active",t.selectedValue=="last_month"),l(2),h("active",t.selectedValue=="custom"),l(2),d(t.selectedValue==="custom"?24:-1)}}function At(e,i){e&1&&(c(0,"div",18)(1,"button",19)(2,"span"),_(3,"Copy"),r()(),c(4,"button",20)(5,"span"),_(6,"CSV"),r()(),c(7,"button",21)(8,"span"),_(9,"Excel"),r()(),c(10,"button",22)(11,"span"),_(12,"PDF"),r()(),c(13,"button",23)(14,"span"),_(15,"Print"),r()()())}function Lt(e,i){if(e&1){let t=b();c(0,"div",6)(1,"label"),_(2,"Search: "),c(3,"input",17),X("ngModelChange",function(a){u(t);let s=o(3);return K(s.searchText,a)||(s.searchText=a),C(a)}),m("keyup",function(){u(t);let a=o(3);return C(a.searchTerm(a.searchText))}),r()(),g(4,At,16,0,"div",18),r()}if(e&2){let t=o(3);l(3),J("ngModel",t.searchText),p("placeholder",t.searchPlaceholder),l(),d(t.downloadReports?4:-1)}}function jt(e,i){if(e&1&&(c(0,"div",2),g(1,Ot,3,0,"select")(2,zt,25,18,"div")(3,Lt,5,3,"div",6),r()),e&2){let t=o(2);l(),d(t.showPaginate?1:-1),l(),d(t.dateFilter?2:-1),l(),d(t.search?3:-1)}}function Yt(e,i){if(e&1){let t=b();c(0,"th",24)(1,"input",25),m("change",function(a){u(t);let s=o(2);return C(s.checkUncheckAll(a))}),r()()}if(e&2){let t=o(2);h("selected-checkbox",t.selected.length&&t.selected.length!=t.tableConfig.data.length),l(),p("checked",t.tableConfig&&t.tableConfig.data.length&&t.selected&&t.selected.length==t.tableConfig.data.length||!1)}}function Ht(e,i){e&1&&T(0,"th")}function qt(e,i){if(e&1){let t=b();c(0,"th",27),m("click",function(){u(t);let a=o(2).$implicit,s=o(2);return C(s.onSort(a.sortable_key?a.sortable_key:a.field_value))}),_(1),T(2,"span",28),r()}if(e&2){let t=o(2).$implicit,n=o(2);p("ngClass",n.sortable_key==(t.sortable_key?t.sortable_key:t.field_value)&&n.filter.sort=="asc"?"asc":n.sortable_key==(t.sortable_key?t.sortable_key:t.field_value)&&n.filter.sort=="desc"?"desc":""),l(),w(" ",t.title," ")}}function Ut(e,i){if(e&1&&(c(0,"th"),_(1),r()),e&2){let t=o(2).$implicit;l(),v(t.title)}}function Wt(e,i){if(e&1&&g(0,qt,3,2,"th",26)(1,Ut,2,1,"th"),e&2){let t=o().$implicit;d(t.sort?0:1)}}function Qt(e,i){if(e&1&&g(0,Wt,2,1),e&2){let t=i.$implicit;d(t.hide_column?-1:0)}}function Gt(e,i){e&1&&(c(0,"th"),_(1),r()),e&2&&(l(),v("Actions"))}function Jt(e,i){if(e&1){let t=b();c(0,"td",24)(1,"input",31),m("change",function(a){u(t);let s=o(4);return C(s.onItemChecked(a))}),r()()}if(e&2){let t=o().$implicit,n=o(3);l(),p("value",t==null?null:t.id)("checked",n.selected&&n.selected.length&&n.selected.includes(t.id)),I("data-id",t.id)}}function Kt(e,i){if(e&1){let t=b();c(0,"td",32),m("click",function(){u(t);let a=o().$implicit,s=o(3);return C(s.openRowDetails(a.id))}),r()}if(e&2){let t=o().$implicit,n=o(3);p("ngStyle",k(1,It,"url(assets/images/"+(n.selectedOpenRows.includes(t.id)?"details_close":"details_open")+".png) no-repeat center center"))}}function Xt(e,i){if(e&1&&(c(0,"td"),_(1),r()),e&2){let t=o(2).$implicit,n=o().$implicit;l(),Q(" ",n[t.field_value]," ",t.type=="qty"?t.text?t.text:"QTY":t.type=="purchase"?"Purchases":""," ")}}function Zt(e,i){if(e&1&&(_(0),tt(1,"number")),e&2){let t=o(3).$implicit,n=o().$implicit;w(" $",et(1,1,n[t.field_value],"1.2-2")," ")}}function te(e,i){if(e&1&&_(0),e&2){let t=o(3).$implicit,n=o().$implicit;w(" $",n[t.field_value]," ")}}function ee(e,i){if(e&1&&(c(0,"td",26),g(1,Zt,2,4)(2,te,1,1),r()),e&2){let t=o(2).$implicit;p("ngClass",t.class?t.class:""),l(),d(t.decimal_number?1:2)}}function ie(e,i){if(e&1&&_(0),e&2){let t=o(3).$implicit;w(" ",t.text," ")}}function ne(e,i){if(e&1&&(c(0,"td",33),g(1,ie,1,1),r()),e&2){let t=o(2).$implicit,n=o().$implicit;p("innerHTML",n[t.field_value],L),l(),d(t.text?1:-1)}}function ae(e,i){if(e&1&&g(0,Xt,2,2,"td")(1,ee,3,2,"td",26)(2,ne,2,2,"td",33),e&2){let t=o().$implicit;d(t.type=="qty"||t.type=="purchase"?0:t.type=="price"?1:2)}}function oe(e,i){if(e&1&&g(0,ae,3,1),e&2){let t=i.$implicit;d(t.hide_column?-1:0)}}function le(e,i){if(e&1&&(c(0,"button"),_(1),r()),e&2){let t=o().$implicit;q(t.class),l(),v(t.label)}}function re(e,i){e&1&&(c(0,"button",36),_(1,"+ "),r())}function se(e,i){if(e&1){let t=b();c(0,"a",42),m("click",function(){u(t);let a=o().$implicit,s=o(2).$implicit,f=o(3);return C(f.handleAction(a,s))}),T(1,"app-svg-icon",43),r()}if(e&2){let t=o().$implicit;p("routerLink",t.path),l(),p("icon",t.icon)}}function ce(e,i){if(e&1){let t=b();c(0,"a",42),m("click",function(){u(t);let a=o().$implicit,s=o(2).$implicit,f=o(3);return C(f.handleAction(a,s))}),T(1,"i",44),r()}if(e&2){let t=o().$implicit;p("routerLink",t.path)}}function _e(e,i){if(e&1&&(c(0,"a",38),T(1,"i"),r()),e&2){let t=o().$implicit;p("ngbTooltip","Change Status"),l(),U("fa-solid fa-",t.icon,"")}}function de(e,i){e&1&&(c(0,"Button",39),T(1,"i",45),r()),e&2&&p("ngbTooltip","Message")}function pe(e,i){e&1&&(c(0,"Button",40),T(1,"i",46),r()),e&2&&p("ngbTooltip","Approve")}function me(e,i){e&1&&(c(0,"Button",41),T(1,"i",47),r()),e&2&&p("ngbTooltip","Reject")}function ue(e,i){if(e&1&&g(0,le,2,3,"button",35)(1,re,2,0,"button",36)(2,se,2,2,"a",37)(3,ce,2,1,"a",37)(4,_e,2,4,"a",38)(5,de,2,1,"Button",39)(6,pe,2,1,"Button",40)(7,me,2,1,"Button",41),e&2){let t=i.$implicit;d(t.type=="button"?0:-1),l(),d(t.label=="Create"?1:t.label=="Edit"||t.label=="Delete"?2:t.label=="View"?3:t.label=="Refresh"?4:t.label=="Message"?5:t.label=="Approve"?6:t.label=="Reject"?7:-1)}}function Ce(e,i){if(e&1&&(c(0,"td")(1,"div",34),S(2,ue,8,2,null,null,y),r()()),e&2){let t=o(4);l(2),D(t.tableConfig.row_action)}}function ge(e,i){if(e&1&&(c(0,"tr")(1,"td"),_(2),r(),T(3,"td",33),r()),e&2){let t=i.$implicit,n=o(2).$implicit;l(2),v(t.title),l(),p("innerHTML",n[t.field_value],L)}}function fe(e,i){if(e&1&&(c(0,"tr",30)(1,"td",48)(2,"table",49)(3,"tbody"),S(4,ge,4,2,"tr",null,y),r()()()()),e&2){let t=o(4);l(4),D(t.tableConfig.columns)}}function be(e,i){if(e&1&&(c(0,"tr"),g(1,Jt,2,3,"td",24)(2,Kt,1,3,"td",29),S(3,oe,1,1,null,null,y),g(5,Ce,4,0,"td"),r(),g(6,fe,6,0,"tr",30)),e&2){let t=i.$implicit,n=o(3);h("selected",n.selected&&n.selected.length&&n.selected.includes(t.id)),l(),d(n.hasCheckbox?1:-1),l(),d(n.rowDetails?2:-1),l(),D(n.tableConfig.columns),l(2),d(n.tableConfig.row_action?5:-1),l(),d(n.rowDetails&&n.selectedOpenRows.includes(t.id)?6:-1)}}function he(e,i){if(e&1&&(c(0,"tbody"),S(1,be,7,6,null,null,y),r()),e&2){let t=o(2);l(),D(t.tableData)}}function xe(e,i){if(e&1&&(c(0,"tbody")(1,"tr")(2,"td",50),_(3,"No data found"),r()()()),e&2){let t=o(2);l(),I("data-dt-row",t.getColSpan()),l(),I("colspan",t.getColSpan())}}function Te(e,i){if(e&1){let t=b();c(0,"app-pagination",51),m("setPage",function(a){u(t);let s=o(2);return C(s.setPage(a))}),r()}if(e&2){let t=o(2);p("total",t.tableConfig.data.length)("paginate",t.paginate)("paginateDetails",t.paginateDetails)("selectedRows",t.selectedRows)("selectedItems",t.selected.length)}}function ye(e,i){if(e&1&&(g(0,jt,4,3,"div",2),c(1,"table",3)(2,"thead")(3,"tr"),g(4,Yt,2,3,"th",4)(5,Ht,1,0,"th"),S(6,Qt,1,1,null,null,y),g(8,Gt,2,1,"th"),r()(),g(9,he,3,0,"tbody")(10,xe,4,2,"tbody"),r(),g(11,Te,1,5,"app-pagination",5)),e&2){let t=o();d(t.search||t.dateFilter||t.showPaginate?0:-1),l(),p("ngClass",t.tableClass),l(3),d(t.hasCheckbox?4:-1),l(),d(t.rowDetails?5:-1),l(),D(t.tableConfig.columns),l(2),d(t.tableConfig.row_action?8:-1),l(),d(t.tableData&&t.tableData.length?9:t.tableData.length?-1:10),l(2),d(t.tableConfig.data.length&&t.pagination?11:-1)}}var yt=class e{constructor(i,t,n,a){this.tableService=i;this.modal=t;this.calendar=n;this.formatter=a}tableConfig;hasCheckbox;pageSize=4;paginateDetails=!1;showPaginate=!1;tableClass;search=!0;pagination=!0;selectedRows=!1;rowDetails=!1;dateFilter=!1;downloadReports=!1;searchPlaceholder="";action=new P;tableData$;total$;selected=[];paginate;tableData;pageNo=1;sortValue="asc";sortable_key;searchText="";rowDetailOpen=!1;selectedOpenRows=[];dateDropdownOpen=!1;hoveredDate=null;fromDate;toDate;filter={search:"",sort:"asc",page:this.pageNo,pageSize:this.pageSize,date:{start_date:"",to_date:""}};pageSizeOptions=[{title:10,value:10},{title:15,value:15},{title:25,value:25},{title:50,value:50},{title:100,value:100}];ngOnChanges(i){if(i.pageSize&&(this.filter.pageSize=i.pageSize.currentValue,!this.pageSizeOptions.some(t=>t.value===this.filter.pageSize))){let t=this.pageSizeOptions.findIndex(a=>a.value>this.filter.pageSize),n={title:this.filter.pageSize,value:this.filter.pageSize,selected:!0};t===-1?this.pageSizeOptions.push(n):this.pageSizeOptions.splice(t,0,n)}i.tableConfig&&this.tableConfig&&this.tableConfig.data&&this.paginateData(),i.pageNo&&this.paginateData()}isArray(i){return Array.isArray(i)}getNestedPropertyValue(i,t){if(!i)return"";let n=i.split("."),a=t;for(let s of n)if(a&&a.hasOwnProperty(s))a=a[s];else return"";return a}getColumnClass(i,t){for(let n in t)if(i.includes(n)){let a=t[n];i=i.replace(n,a)}return i}checkUncheckAll(i){this.tableConfig.data.forEach(t=>{t.is_checked=i?.target?.checked,this.setSelectedItem(i?.target?.checked,t?.id)})}onItemChecked(i){this.setSelectedItem(i.target?.checked,Number(i.target?.value))}setSelectedItem(i,t){let n=this.selected.indexOf(Number(t));i?n==-1&&this.selected.push(Number(t)):this.selected=this.selected.filter(a=>a!==Number(t))}onSort(i){this.sortable_key=i,this.filter.page=1,this.filter.sort=="asc"?this.filter.sort="desc":this.filter.sort="asc",this.applyFilters()}paginateData(){this.tableConfig&&this.tableConfig.data&&this.applyFilters()}setPage(i){this.filter.page=i,this.paginateData()}searchTerm(i){this.filter.page=1,this.filter.search=i,this.applyFilters()}handleSelect(i){this.filter.pageSize=+i.target.value,this.applyFilters()}handleAction(i,t){i.action_to_perform=="delete"&&(i.modal?St.default.fire({title:"Are you sure?",text:i.model_text?i.model_text:"Do you really want to delete the product?",imageUrl:"assets/images/gif/trash.gif",confirmButtonText:"Yes, delete it!",showCancelButton:!0,cancelButtonText:"Cancel",cancelButtonColor:"#FC4438"}).then(n=>{n.isConfirmed&&this.action.emit({action_to_perform:i.action_to_perform,data:t})}):this.action.emit({action_to_perform:i.action_to_perform,data:t})),i.action_to_perform=="view"&&this.action.emit({action_to_perform:i.action_to_perform,data:t})}openRowDetails(i){this.selectedOpenRows.indexOf(i)===-1?this.selectedOpenRows.push(i):this.selectedOpenRows=this.selectedOpenRows.filter(n=>n!==i)}getColSpan(){let i=this.tableConfig.columns.length,t=this.tableConfig.row_action?1:0,n=this.hasCheckbox?1:0,a=this.rowDetails?1:0;return i+t+n+a}selectedDate="";selectedValue="";handleDropdown(){this.dateDropdownOpen=!this.dateDropdownOpen}handleDateFilter(i){this.selectedValue=i;let t=new Date,n=t.getFullYear()+"-"+String(t.getMonth()+1).padStart(2,"0")+"-"+String(t.getDate()).padStart(2,"0");if(this.selectedValue){if(this.selectedValue==="today")this.filter.date.start_date=n,this.filter.date.to_date=n;else if(this.selectedValue==="yesterday"){let a=new Date(t);a.setDate(t.getDate()-1),n=a.getFullYear()+"-"+String(a.getMonth()+1).padStart(2,"0")+"-"+String(a.getDate()).padStart(2,"0"),this.filter.date.start_date=n,this.filter.date.to_date=n}else if(this.selectedValue==="7_days"){let a=new Date(t);a.setDate(t.getDate()-7),n=a.getFullYear()+"-"+String(a.getMonth()+1).padStart(2,"0")+"-"+String(a.getDate()).padStart(2,"0"),this.filter.date.start_date=n,this.filter.date.to_date=t.getFullYear()+"-"+String(t.getMonth()+1).padStart(2,"0")+"-"+String(t.getDate()).padStart(2,"0")}else if(this.selectedValue==="30_days"){let a=new Date(t);a.setDate(t.getDate()-30),n=a.getFullYear()+"-"+String(a.getMonth()+1).padStart(2,"0")+"-"+String(a.getDate()).padStart(2,"0"),this.filter.date.start_date=n,this.filter.date.to_date=t.getFullYear()+"-"+String(t.getMonth()+1).padStart(2,"0")+"-"+String(t.getDate()).padStart(2,"0")}else if(this.selectedValue==="this_month"){let a=new Date(t.getFullYear(),t.getMonth(),1),s=new Date(t.getFullYear(),t.getMonth()+1,0),f=a.getFullYear()+"-"+String(a.getMonth()+1).padStart(2,"0")+"-"+String(a.getDate()).padStart(2,"0"),x=s.getFullYear()+"-"+String(s.getMonth()+1).padStart(2,"0")+"-"+String(s.getDate()).padStart(2,"0");this.filter.date.start_date=f,this.filter.date.to_date=x}else if(this.selectedValue==="last_month"){let a=new Date(t.getFullYear(),t.getMonth()-1,1),s=new Date(t.getFullYear(),t.getMonth(),0);n=a.getFullYear()+"-"+String(a.getMonth()+1).padStart(2,"0")+"-"+String(a.getDate()).padStart(2,"0"),this.filter.date.start_date=n,n=s.getFullYear()+"-"+String(s.getMonth()+1).padStart(2,"0")+"-"+String(s.getDate()).padStart(2,"0"),this.filter.date.to_date=n}}this.selectedDate=`${this.filter.date.start_date} - ${this.filter.date.to_date}`,this.dateDropdownOpen=!1,this.applyFilters()}onDateSelection(i){!this.fromDate||this.fromDate&&this.toDate?(this.fromDate=i,this.toDate=null):this.fromDate&&!this.toDate&&(i.after(this.fromDate)?(this.toDate=i,this.filter.date.start_date=`${this.fromDate.year}-${String(this.fromDate.month).padStart(2,"0")}-${String(this.fromDate.day).padStart(2,"0")}`,this.filter.date.to_date=`${this.toDate.year}-${String(this.toDate.month).padStart(2,"0")}-${String(this.toDate.day).padStart(2,"0")}`,this.selectedDate=`${this.filter.date.start_date} - ${this.filter.date.to_date}`):this.fromDate=i),this.fromDate&&this.toDate&&(this.selectedValue=""),this.applyFilters()}isHovered(i){return this.fromDate&&!this.toDate&&this.hoveredDate&&i.after(this.fromDate)&&i.before(this.hoveredDate)}isInside(i){return this.toDate&&i.after(this.fromDate)&&i.before(this.toDate)}isRange(i){return i.equals(this.fromDate)||this.toDate&&i.equals(this.toDate)||this.isInside(i)||this.isHovered(i)}validateInput(i,t){let n=this.formatter.parse(t);return n&&this.calendar.isValid(j.from(n))?j.from(n):i}applyFilters(){let i=[...this.tableConfig.data];this.filter.search.trim()!==""&&(i=i.filter(t=>Object.keys(t).some(n=>{let a=t[n];return!!((typeof a=="string"||typeof a=="object")&&(typeof a=="string"?a:a.toString()).toLowerCase().includes(this.filter.search.toLowerCase())||typeof a=="number"&&a.toString().includes(this.filter.search))}))),this.filter.sort&&i.sort((t,n)=>{let a=t[this.sortable_key],s=n[this.sortable_key],f=F=>{if(typeof F=="string")return F;if(typeof F=="object"){let V=document.createElement("div");return V.innerHTML=F.toString(),V.textContent||V.innerText||""}return""},x=f(a),N=f(s);return(typeof a=="string"||typeof a=="object")&&(typeof s=="string"||typeof s=="object")?this.filter.sort==="asc"?x.localeCompare(N):N.localeCompare(x):typeof a=="number"&&typeof s=="number"?this.filter.sort==="asc"?a-s:s-a:0}),this.filter.date.start_date&&(i=i.filter(t=>{if(t&&t.date){let n=new Date(t.date),a=new Date(this.filter.date.start_date),s=this.filter.date.to_date?new Date(this.filter.date.to_date):null;if(a&&s)return n>=a&&n<=s;if(a)return n>=a;if(s)return n<=s}return!0})),this.paginate=this.tableService.getPager(i.length,this.filter.page,this.filter.pageSize),this.tableData=i.slice(this.paginate.start_index,this.paginate.end_index+1)}static \u0275fac=function(t){return new(t||e)(E(A),E(ft),E(mt),E(Ct))};static \u0275cmp=M({type:e,selectors:[["app-table"]],inputs:{tableConfig:"tableConfig",hasCheckbox:"hasCheckbox",pageSize:"pageSize",paginateDetails:"paginateDetails",showPaginate:"showPaginate",tableClass:"tableClass",search:"search",pagination:"pagination",selectedRows:"selectedRows",rowDetails:"rowDetails",dateFilter:"dateFilter",downloadReports:"downloadReports",searchPlaceholder:"searchPlaceholder"},outputs:{action:"action"},features:[Z([O]),H],decls:1,vars:1,consts:[["dp",""],["t",""],[1,"top-body"],[1,"table",3,"ngClass"],[1,"datatable-checkbox",3,"selected-checkbox"],[3,"total","paginate","paginateDetails","selectedRows","selectedItems"],["id","basic-1_filter","search","",1,"dataTables_filter"],[3,"change"],[3,"value","selected"],[1,"row","align-items-center","g-1"],[1,"col-auto"],[1,"form-label"],["id","reportrange","readonly","readonly",1,"range-dropdown","flatpickr-input"],[3,"click"],["id","rangeButtons"],["outsideDays","hidden",3,"dateSelect","displayMonths","dayTemplate"],[1,"custom-day",3,"mouseenter","mouseleave"],["type","text","name","searchTerm",3,"ngModelChange","keyup","ngModel","placeholder"],[1,"dt-buttons","btn-group","flex-wrap"],["type","button",1,"btn","buttons-copy","buttons-html5","btn-outline-primary"],["type","button",1,"btn","buttons-csv","buttons-html5","btn-outline-primary"],["type","button",1,"btn","buttons-excel","buttons-html5","btn-outline-primary"],["type","button",1,"btn","buttons-pdf","buttons-html5","btn-outline-primary"],["type","button",1,"btn","buttons-print","btn-outline-primary"],[1,"datatable-checkbox"],["type","checkbox",1,"cb-select-checkbox",3,"change","checked"],[3,"ngClass"],[3,"click","ngClass"],[1,"cb-accending-decending"],[3,"ngStyle"],["data-dt-row","8"],["type","checkbox",3,"change","value","checked"],[3,"click","ngStyle"],[3,"innerHTML"],[1,"product-action","common-align","gap-2","justify-content-start"],[3,"class"],[1,"plus-btn"],["href","javascript:void(0)",1,"square-white",3,"routerLink"],["href","javascript:void(0)","placement","top",1,"square-white",3,"ngbTooltip"],["placement","top",1,"btn","btn-primary",3,"ngbTooltip"],["placement","top",1,"btn","btn-success",3,"ngbTooltip"],["placement","top",1,"btn","btn-danger",3,"ngbTooltip"],["href","javascript:void(0)",1,"square-white",3,"click","routerLink"],[3,"icon"],[1,"fa-solid","fa-eye"],[1,"fa-solid","fa-envelope"],[1,"fa-solid","fa-thumbs-up"],[1,"fa-solid","fa-circle-xmark"],["colspan","8"],["cellpadding","5","cellspacing","0","border","0",2,"padding-left","50px"],[1,"empty-data"],[3,"setPage","total","paginate","paginateDetails","selectedRows","selectedItems"]],template:function(t,n){t&1&&g(0,ye,12,7),t&2&&d(n.tableConfig?0:-1)},dependencies:[R,$,nt,O,bt,dt,ct,_t,lt,rt,st,ot,at,gt,ut,xt,ht,z,pt],encapsulation:2})};export{yt as a};
